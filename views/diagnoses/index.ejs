

<h2> 
    Diagnósticos: 

    <% if (locals.readwrite) { %>
        <a href="/reports/<%= report.id %>/diagnoses/new">
            <button type="button">Crear nuevo diagnóstico</button>
        </a>
    <% } %>

</h2>


<ul>
    <% for (var i in diagnoses) { %> 
        <% var diagnose = diagnoses[i]; %>      

        <li>
            <p>
                Tipo: <b> <%= diagnose.dtypeCode %> </b>
                -
                Resultado: <b> <%= diagnose.dtresultCode %> </b>
                <% if (diagnose.dtroptionCode !== "") { %>
                    -
                    Opción: <b> <%= diagnose.dtroptionCode %> </b> 
                <% } %>

                <% if (locals.readwrite) { %>
                    <a href="/reports/<%= report.id %>/diagnoses/<%= diagnose.id %>/edit?redir=<%= redir %>"><button>editar</button></a>

                    <a href="/reports/<%= report.id %>/diagnoses/<%= diagnose.id %>?redir=<%= redir %>&_method=DELETE" 
                        onClick="return confirm('¿Seguro que quiere borrar el diagnóstico <%= diagnose.dtypeCode %>-<%= diagnose.dtresultCode %>-<%= diagnose.dtroptionCode %>?');">
                        <button>borrar</button>
                    </a>
                <% } %>

            </p>

            <% if (diagnose.resultNotes !== "") { %>
                <p>
                    Observaciones del resultado: <%- escapeText(diagnose.resultNotes) %>
                </p>
            <% } %>

            <% if (diagnose.optionNotes !== "") { %>
                <p>
                    Observaciones de la opción: <%- escapeText(diagnose.optionNotes) %>
                </p>
            <% } %>
        </li> 
    <% } %>
</ul>

